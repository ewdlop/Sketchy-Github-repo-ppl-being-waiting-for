# 🎃

ChatGPT: 這裡是幾個「萬聖節主題」的 **Sketchy SQL Queries**（詭異、搞怪又帶點駭客風格）🎃，純屬幽默與教學用途，請勿在真實生產資料庫上執行。
所有例子均安全可測試（只查詢不改資料），並附上解釋。

---

## 🧛‍♂️ 1. 找出「幽靈紀錄」

```sql
SELECT *
FROM users
WHERE last_login IS NULL
  OR deleted_at IS NOT NULL;
```

**說明**：
這些帳號從沒登入過或早就「被刪除」卻還在資料庫裡──最像「幽靈」的存在。

---

## 🧙‍♀️ 2. 詛咒觸發紀錄

```sql
SELECT id, username, COUNT(*) AS curse_count
FROM logs
WHERE message LIKE '%forbidden%' OR message LIKE '%unauthorized%'
GROUP BY id, username
HAVING curse_count > 3;
```

**說明**：
找出多次觸發「禁忌」操作的使用者。
3 次以上 = 已經中了 SQL 詛咒。

---

## 🪦 3. 從墳墓爬出的資料

```sql
SELECT *
FROM products
WHERE discontinued = 1
  AND DATEDIFF(DAY, deleted_at, GETDATE()) > 365;
```

**說明**：
列出「死而復生」超過一年的商品。
適合用來清理資料庫的「殭屍資料」。

---

## 🧟‍♂️ 4. 連結兩個世界

```sql
SELECT u.username, o.order_id
FROM users u
LEFT JOIN orders o ON u.id = o.user_id
WHERE o.user_id IS NULL;
```

**說明**：
這查詢會找到「沒有任何訂單」的使用者。
他們就像在人間行走的「無主魂」。

---

## 🕸️ 5. 蜘蛛網查詢（循環引用）

```sql
WITH RECURSIVE spider_web AS (
  SELECT id, parent_id, name
  FROM categories
  WHERE parent_id IS NULL
  UNION ALL
  SELECT c.id, c.parent_id, c.name
  FROM categories c
  JOIN spider_web s ON c.parent_id = s.id
)
SELECT * FROM spider_web;
```

**說明**：
用遞迴 CTE 爬整棵分類樹。
但若資料出現循環（self-loop），這查詢會陷入無盡的「蜘蛛網」。

---

## 🩸 6. 隱藏的血跡（Red Flags）

```sql
SELECT *
FROM transactions
WHERE amount < 0
  OR description LIKE '%error%'
  OR status IN ('failed', 'reversed');
```

**說明**：
抓出「異常交易」──像血跡一樣的警訊。
紅旗不只是節慶顏色。

---

## 🎃 Bonus：隨機召喚一筆記錄

```sql
SELECT TOP 1 *
FROM victims -- 呃…假設這是個 Halloween Table 名稱
ORDER BY NEWID();
```

**說明**：
每次執行都隨機召喚一筆資料。
你永遠不知道會叫出誰。

---

📚 **參考資料**：

* Microsoft Docs – [Transact-SQL Reference](https://learn.microsoft.com/en-us/sql/t-sql/language-reference)
* PostgreSQL Documentation – [SQL Syntax and CTEs](https://www.postgresql.org/docs/current/queries-with.html)
* OWASP – [SQL Injection Prevention Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html)

---

是否想要我接著幫你生成「**恐怖 SQL Injection 實例（教育用）**」和「**防禦手法**」版本？可做成一篇 Halloween 技術文章風格。
